% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mcp-context.R
\name{mcp_context}
\alias{mcp_context}
\title{Add Context to Chat Messages}
\usage{
mcp_context(..., .header = "## Context", .wrap_code = TRUE)
}
\arguments{
\item{...}{R objects to format, or character strings to include.
Each argument will be formatted using \code{mcp_describe()} unless it's
a plain text string.}

\item{.header}{Character string for the context header.
Default: \code{"## Context"}}

\item{.wrap_code}{Logical. Whether to wrap non-text objects in code blocks.
Default: \code{TRUE}}
}
\value{
An \code{ellmer::ContentText} object containing the formatted
context. This object can be passed directly to \code{chat$chat()}.
}
\description{
Formats R objects and combines them with optional text to provide context
for chat messages. Similar to \code{btw::btw()}, this function wraps
formatted output in a structured format that chat models can easily
understand.

This function uses \code{\link{mcp_describe}} internally to format objects
into human-readable text, then wraps the output in code blocks and returns
an \code{ellmer::ContentText} object suitable for use with
\code{ellmer::Chat$chat()}.
}
\details{
The function processes each argument as follows:
\itemize{
\item Package references like \code{"{packagename}"} are expanded to show
all help topics from that package in JSON format
\item Plain text strings (single character vectors) are used as-is
\item Other R objects are formatted using \code{mcp_describe()}
\item Formatted objects are wrapped in code blocks if
\code{.wrap_code = TRUE}
\item All parts are combined with the header into a single text block
}

The resulting \code{ContentText} object is compatible with \code{ellmer}
chat functions and will be automatically processed when passed to
\code{chat$chat()}.
}
\examples{
# Single object
mcp_context(sessionInfo())

# Package help topics
mcp_context("{tricobbler}")

# Multiple objects with question
mcp_context(sessionInfo(), mtcars, "What packages and data are available?")

\dontrun{
# Use in chat
chat <- ellmer::chat_anthropic()
response <- chat$chat(
  mcp_context(sessionInfo(), "What R version am I using?")
)
}

}
\seealso{
\code{\link{mcp_describe}} for the underlying formatting function,
}

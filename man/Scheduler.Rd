% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/class-scheduler.R
\name{Scheduler}
\alias{Scheduler}
\title{Workflow Execution Scheduler}
\description{
R6 class that orchestrates workflow execution by managing stage
progression, state execution, and agent coordination. This is the primary
runtime component in the Runtime Layer (Tier 2) that brings together the
immutable policy definitions (\code{Manifest}) with executable agents.
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{manifest}}{Manifest, the workflow blueprint}

\item{\code{agents}}{\code{fastmap::fastmap()} object, registry of Agent
objects keyed by agent_id}

\item{\code{context}}{Context, the execution environment for logging and storage}

\item{\code{current_stage}}{character, the currently executing stage name}

\item{\code{stage_started}}{\code{POSIXct}, timestamp when current stage started}

\item{\code{current_state}}{character, the currently executing state name}

\item{\code{state_started}}{\code{POSIXct}, timestamp when current state started}

\item{\code{suspended}}{logical, whether execution is paused}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-TricobblerScheduler-new}{\code{Scheduler$new()}}
\item \href{#method-TricobblerScheduler-on}{\code{Scheduler$on()}}
\item \href{#method-TricobblerScheduler-off}{\code{Scheduler$off()}}
\item \href{#method-TricobblerScheduler-validate}{\code{Scheduler$validate()}}
\item \href{#method-TricobblerScheduler-start}{\code{Scheduler$start()}}
\item \href{#method-TricobblerScheduler-init_resources}{\code{Scheduler$init_resources()}}
\item \href{#method-TricobblerScheduler-run_stage}{\code{Scheduler$run_stage()}}
\item \href{#method-TricobblerScheduler-suspend}{\code{Scheduler$suspend()}}
\item \href{#method-TricobblerScheduler-stop}{\code{Scheduler$stop()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerScheduler-new"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerScheduler-new}{}}}
\subsection{Method \code{new()}}{
Initialize scheduler with manifest blueprint and agents
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Scheduler$new(manifest, agents = list(), context = AgentContext$new())}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{manifest}}{Manifest object, the workflow blueprint}

\item{\code{agents}}{list, collection of Agent objects}

\item{\code{context}}{Context object, execution environment
(default: new \code{\link{AgentContext}})}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerScheduler-on"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerScheduler-on}{}}}
\subsection{Method \code{on()}}{
Register a listener for a lifecycle event
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Scheduler$on(type, handler, id = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{type}}{character, event type (e.g. \code{"suspend"},
\code{"state_completed"}, \code{"stage_completed"},
\code{"dispatch"})}

\item{\code{handler}}{function, callback receiving the condition object}

\item{\code{id}}{character or \code{NULL}, optional listener ID for
replacement or removal; auto-generated via
\code{digest::digest(handler)} when \code{NULL}}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
character, the listener ID (invisibly)
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerScheduler-off"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerScheduler-off}{}}}
\subsection{Method \code{off()}}{
Remove a registered lifecycle listener by ID
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Scheduler$off(id)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{id}}{character, the listener ID returned by \code{$on()}}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerScheduler-validate"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerScheduler-validate}{}}}
\subsection{Method \code{validate()}}{
Verify that all required agents are registered
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Scheduler$validate(on_error = c("error", "quiet"))}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{on_error}}{character, action on validation failure
("error" or "quiet")}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerScheduler-start"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerScheduler-start}{}}}
\subsection{Method \code{start()}}{
Start the workflow execution from the ready stage
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Scheduler$start()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerScheduler-init_resources"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerScheduler-init_resources}{}}}
\subsection{Method \code{init_resources()}}{
Initialize resources and prepare for execution
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Scheduler$init_resources(reset_context = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{reset_context}}{logical, whether to reset the context storage}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerScheduler-run_stage"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerScheduler-run_stage}{}}}
\subsection{Method \code{run_stage()}}{
Execute a specific workflow stage
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Scheduler$run_stage(stage = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{stage}}{character, stage name (NULL to run next stage)}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerScheduler-suspend"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerScheduler-suspend}{}}}
\subsection{Method \code{suspend()}}{
Suspend the workflow execution
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Scheduler$suspend(error = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{error}}{condition or character, the error that caused suspension
(default: \code{private$.last_error})}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerScheduler-stop"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerScheduler-stop}{}}}
\subsection{Method \code{stop()}}{
Stop the workflow execution
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Scheduler$stop()}\if{html}{\out{</div>}}
}

}
}

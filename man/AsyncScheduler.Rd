% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/class-scheduler_async.R
\name{AsyncScheduler}
\alias{AsyncScheduler}
\title{\verb{Async} Workflow Execution Scheduler}
\description{
R6 class that extends \code{\link{Scheduler}} with
promise-based asynchronous execution. Within each stage,
independent states are dispatched concurrently via
\code{AgentRuntime$run_async()}, bounded by
\code{max_concurrency}. Stages are executed sequentially.
}
\details{
TODO: explain the cycle
}
\section{Super class}{
\code{tricobbler::TricobblerScheduler} -> \code{TricobblerAsyncScheduler}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-TricobblerAsyncScheduler-stop}{\code{AsyncScheduler$stop()}}
\item \href{#method-TricobblerAsyncScheduler-start}{\code{AsyncScheduler$start()}}
\item \href{#method-TricobblerAsyncScheduler-execute_runtime}{\code{AsyncScheduler$execute_runtime()}}
\item \href{#method-TricobblerAsyncScheduler-advance}{\code{AsyncScheduler$advance()}}
\item \href{#method-TricobblerAsyncScheduler-run_stage}{\code{AsyncScheduler$run_stage()}}
\item \href{#method-TricobblerAsyncScheduler-suspend}{\code{AsyncScheduler$suspend()}}
}
}
\if{html}{\out{
<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="tricobbler" data-topic="TricobblerScheduler" data-id="dispatch_event"><a href='../../tricobbler/html/TricobblerScheduler.html#method-TricobblerScheduler-dispatch_event'><code>tricobbler::TricobblerScheduler$dispatch_event()</code></a></span></li>
<li><span class="pkg-link" data-pkg="tricobbler" data-topic="TricobblerScheduler" data-id="enqueue_runtime"><a href='../../tricobbler/html/TricobblerScheduler.html#method-TricobblerScheduler-enqueue_runtime'><code>tricobbler::TricobblerScheduler$enqueue_runtime()</code></a></span></li>
<li><span class="pkg-link" data-pkg="tricobbler" data-topic="TricobblerScheduler" data-id="get_incomplete_size"><a href='../../tricobbler/html/TricobblerScheduler.html#method-TricobblerScheduler-get_incomplete_size'><code>tricobbler::TricobblerScheduler$get_incomplete_size()</code></a></span></li>
<li><span class="pkg-link" data-pkg="tricobbler" data-topic="TricobblerScheduler" data-id="init_resources"><a href='../../tricobbler/html/TricobblerScheduler.html#method-TricobblerScheduler-init_resources'><code>tricobbler::TricobblerScheduler$init_resources()</code></a></span></li>
<li><span class="pkg-link" data-pkg="tricobbler" data-topic="TricobblerScheduler" data-id="init_stage"><a href='../../tricobbler/html/TricobblerScheduler.html#method-TricobblerScheduler-init_stage'><code>tricobbler::TricobblerScheduler$init_stage()</code></a></span></li>
<li><span class="pkg-link" data-pkg="tricobbler" data-topic="TricobblerScheduler" data-id="initialize"><a href='../../tricobbler/html/TricobblerScheduler.html#method-TricobblerScheduler-initialize'><code>tricobbler::TricobblerScheduler$initialize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="tricobbler" data-topic="TricobblerScheduler" data-id="off"><a href='../../tricobbler/html/TricobblerScheduler.html#method-TricobblerScheduler-off'><code>tricobbler::TricobblerScheduler$off()</code></a></span></li>
<li><span class="pkg-link" data-pkg="tricobbler" data-topic="TricobblerScheduler" data-id="on"><a href='../../tricobbler/html/TricobblerScheduler.html#method-TricobblerScheduler-on'><code>tricobbler::TricobblerScheduler$on()</code></a></span></li>
<li><span class="pkg-link" data-pkg="tricobbler" data-topic="TricobblerScheduler" data-id="retry_runtime"><a href='../../tricobbler/html/TricobblerScheduler.html#method-TricobblerScheduler-retry_runtime'><code>tricobbler::TricobblerScheduler$retry_runtime()</code></a></span></li>
<li><span class="pkg-link" data-pkg="tricobbler" data-topic="TricobblerScheduler" data-id="start_stage"><a href='../../tricobbler/html/TricobblerScheduler.html#method-TricobblerScheduler-start_stage'><code>tricobbler::TricobblerScheduler$start_stage()</code></a></span></li>
<li><span class="pkg-link" data-pkg="tricobbler" data-topic="TricobblerScheduler" data-id="validate"><a href='../../tricobbler/html/TricobblerScheduler.html#method-TricobblerScheduler-validate'><code>tricobbler::TricobblerScheduler$validate()</code></a></span></li>
</ul>
</details>
}}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerAsyncScheduler-stop"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerAsyncScheduler-stop}{}}}
\subsection{Method \code{stop()}}{
Stop the workflow execution, clearing all
in-progress work and rejecting the active stage promise.
After calling \code{stop()}, the scheduler is in the
\code{"ready"} state and \code{start()} may be called
immediately.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{AsyncScheduler$stop()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerAsyncScheduler-start"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerAsyncScheduler-start}{}}}
\subsection{Method \code{start()}}{
Start the workflow execution
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{AsyncScheduler$start()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
A \code{promise} that resolves when all stages
complete. Callers may block via \code{later::run_now()}
or \code{await()} inside a \code{coro::async} context.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerAsyncScheduler-execute_runtime"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerAsyncScheduler-execute_runtime}{}}}
\subsection{Method \code{execute_runtime()}}{
Dispatch queued runtimes as \verb{async} promises.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{AsyncScheduler$execute_runtime()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
integer, number of runtimes dispatched (invisibly)
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerAsyncScheduler-advance"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerAsyncScheduler-advance}{}}}
\subsection{Method \code{advance()}}{
Drive the next \verb{async} dispatch cycle.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{AsyncScheduler$advance()}\if{html}{\out{</div>}}
}

\subsection{Details}{
Called by promise callbacks when a runtime settles.
Runs: retry -> \verb{enqueue} -> execute. If no incomplete work
remains, resolves the stage promise.
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerAsyncScheduler-run_stage"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerAsyncScheduler-run_stage}{}}}
\subsection{Method \code{run_stage()}}{
Execute a single workflow stage asynchronously.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{AsyncScheduler$run_stage(stage)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{stage}}{character, the stage name to execute}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A promise that resolves when all states in the stage
have completed
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TricobblerAsyncScheduler-suspend"></a>}}
\if{latex}{\out{\hypertarget{method-TricobblerAsyncScheduler-suspend}{}}}
\subsection{Method \code{suspend()}}{
Suspend the workflow execution (\verb{async} version).
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{AsyncScheduler$suspend(
  error = NULL,
  state_name = NA_character_,
  stage = self$current_stage,
  runtime_summary = NULL
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{error}}{condition or character, the error that caused
suspension}

\item{\code{state_name}}{character, the state that caused suspension}

\item{\code{stage}}{character, the stage in which suspension occurred}

\item{\code{runtime_summary}}{list or \code{NULL}, lightweight
summary of the failed runtime}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
character, the chosen action (invisibly)
}
}
}

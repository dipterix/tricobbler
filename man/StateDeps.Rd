% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/class-statedeps.R
\name{StateDeps}
\alias{StateDeps}
\title{Validated Dependency Declarations for State Policies}
\usage{
StateDeps(..., .list = list())
}
\description{
S7 class representing a named list of dependency declarations
used by \code{StatePolicy@depends_on}. Each entry maps a parameter name
to a prior state's output field.
}
\details{
\subsection{Dependency Entry Format}{

Each entry in a \code{StateDeps} object is a named list element where:
\itemize{
\item \strong{Name}: The parameter name passed to the agent function
\item \code{state}: (required) Name of the state to depend on
\item \code{field}: (optional) What to extract - \code{"result"}
(default) or \code{"description"}
\item \code{stage}: (optional) Stage of the dependency. If \code{NULL}
or omitted, the dependency must be in the same stage with higher
priority. If specified, must be an earlier stage in the workflow
}
}

\subsection{Same-Stage vs Cross-Stage Dependencies}{

\itemize{
\item \strong{Same-stage} (\code{stage = NULL}): The dependency state
must have higher priority (higher number = runs first). This ensures
the dependency executes before the dependent within the same stage
\item \strong{Cross-stage} (\code{stage = "earlier_stage"}): The
dependency is in a previous stage. Since stages execute sequentially,
the dependency is guaranteed to complete before the dependent stage
begins
}
}

\subsection{Validation Rules (Property-Level)}{

The property-level \verb{validator} checks structural correctness:
\itemize{
\item Must be a named list (names become parameter names)
\item Each entry must be a list with required \code{state} field
\item \code{state} must be a single non-blank character string
\item \code{field} (if present) must be \code{"result"} or
\code{"description"}
\item \code{stage} (if present) must be a single character string
or \code{NULL}
\item Parameter names must be valid R identifiers
}
}

\subsection{Cross-Validation (Manifest-Level)}{

Additional validation is performed at the \code{\link{Manifest}} level
to check:
\itemize{
\item Referenced states exist in the manifest
\item Same-stage dependencies have higher priority
\item Cross-stage dependencies reference earlier stages
}
}
}
\examples{
# Same-stage dependencies (state must have higher priority)
deps <- StateDeps(
  validation_result = list(state = "validator"),
  parsed_data = list(state = "parser", field = "result")
)

# Cross-stage dependency
deps2 <- StateDeps(
  plan = list(state = "planner", field = "result", stage = "planning")
)

# Empty dependencies (valid)
empty_deps <- StateDeps()

}
\keyword{internal}

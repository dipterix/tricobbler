% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generic-as_agent.R
\name{as_agent}
\alias{as_agent}
\title{Convert Objects to Agent}
\usage{
as_agent(x, ...)
}
\arguments{
\item{x}{Object to convert. Can be:
\itemize{
\item An \code{Agent} object (returned as-is)
\item An \pkg{ellmer} \code{Chat} object
(creates an \verb{LLM}-backed agent)
\item A function with signature \code{function(runtime)}, where
\code{runtime} is an \code{AgentRuntime} object
\item A character string referencing a package function
(\code{"pkg::fun"})
\item An \verb{MCP} tool definition (class \code{tricobbler_mcp_tool})
}}

\item{...}{Additional arguments passed to methods. Common arguments
include \code{id} (character, unique agent identifier),
\code{description} (character, human-readable description), and
\code{describe} (function, result formatting for logging;
defaults to \code{\link{mcp_describe}}).}
}
\value{
An \code{Agent} object.
}
\description{
Generic function to convert various object types into
\code{\link{Agent}} objects for use with the \code{\link{Scheduler}}.
Supports conversion from \pkg{ellmer} Chat objects,
functions, \verb{MCP} tool
specifications, and package function references.
}
\section{Chat Agent Parameters}{

When converting an \pkg{ellmer} Chat object, the following
\code{parameters} (set in \code{\link{StatePolicy}} or
\code{\link{MasterPolicy}}) are recognized:
\describe{
\item{\code{max_tokens}}{integer, maximum tokens for the
\verb{LLM} response.
Applied to the provider before each call.  Useful for
preventing output truncation with long tool-calling
workflows (e.g. set to \code{16384}).}
\item{\code{max_chat_errors}}{integer, number of consecutive
\verb{LLM} call errors (e.g. truncated \verb{JSON},
\verb{API} timeouts) tolerated before the agent gives up.
Defaults to \code{Inf}.  Within this budget the error message
is fed back to the \verb{LLM} so it can self-correct.}
\item{\code{system_prompt}}{character, overrides the policy
description.}
\item{\code{user_prompt}}{character, task prompt sent to the
\verb{LLM}.}
\item{\code{keep_turns}}{logical, preserve conversation
history across retries (default \code{FALSE}).}
\item{\code{return_type}}{an \pkg{ellmer} type specification
for structured output.}
}
}

\examples{

# From a simple function
my_func <- function(runtime) {
  runtime$logger("Hello from my agent!")
  return("done")
}
agent <- as_agent(my_func)


\dontrun{
# From an ellmer Chat (requires API credentials)
chat <- ellmer::chat_openai(model = "gpt-4o-mini")
agent <- as_agent(chat)

# From a package function reference
agent <- as_agent("utils::read.csv", id = "mean_agent")
}

}
\seealso{
\code{\link{StatePolicy}} for details on how to set additional
arguments via \code{parameters} for deterministic agents (functions,
\verb{MCP} tools) and AI agents (\pkg{ellmer} Chat objects).
}
